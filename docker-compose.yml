version: "3"

services:
  app:
    build:
      context: .
    expose:
      - "7096"
    volumes:
      - .:/srv

  nginx:
    image: nginx:alpine
    ports:
      - "4443:443"
    volumes:
      - ./nginx_certs.sh:/docker-entrypoint.d/nginx_certs.sh
      - ./nginx_shrubgrazer.conf:/etc/nginx/conf.d/default.conf
      # openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout nginx-selfsigned.key -out nginx-selfsigned.crt
      # - ./nginx-selfsigned.crt:/etc/nginx/ssl/nginx-selfsigned.crt
      # - ./nginx-selfsigned.key:/etc/nginx/ssl/nginx-selfsigned.key
